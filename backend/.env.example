# ============================
# Backend env template
# Todos los valores deben ser reemplazados
# ============================

# Servidor
NODE_ENV=development
PORT=3001
API_PREFIX=/api

# Base de datos
# Ejemplo sqlite local; en prod usar URL segura (postgres, etc).
DATABASE_URL=file:./database.sqlite
DATABASE_PATH=./database.sqlite
DB_POOL_SIZE=5
DB_POOL_IDLE_TIMEOUT=60000
WAL_CHECKPOINT_INTERVAL=300000

# JWT (genera con: openssl rand -base64 64)
JWT_SECRET=REEMPLAZAR_JWT_SECRET
JWT_REFRESH_SECRET=REEMPLAZAR_REFRESH_SECRET
COOKIE_SECRET=REEMPLAZAR_COOKIE_SECRET
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# CSRF
CSRF_SECRET=REEMPLAZAR_CSRF_SECRET
CSRF_SAME_SITE=strict
CSRF_SECURE=false

# CORS
# Separar múltiples orígenes con coma
ALLOWED_ORIGINS=http://localhost:5173
CORS_ORIGIN=http://localhost:5173
CORS_CREDENTIALS=true

# Rate limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_WHITELIST=127.0.0.1,::1

# Redis (opcional para rate limiting distribuido)
REDIS_URL=redis://localhost:6379
REDIS_ENABLED=true
REDIS_HOST=
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

CACHE_TTL_PRODUCTS=3600
CACHE_TTL_SEARCH=1800
CACHE_TTL_SESSIONS=86400

# Compression
COMPRESSION_ENABLED=true
COMPRESSION_THRESHOLD=1024
COMPRESSION_LEVEL=4

# CDN
CDN_PROVIDER=bunnycdn
CDN_BASE_URL=https://cdn.purezanaturalis.com
BUNNY_STORAGE_ZONE=purezanaturalis
BUNNY_API_KEY=your_bunny_api_key
BUNNY_PULL_ZONE_URL=https://purezanaturalis.b-cdn.net
CF_ACCOUNT_ID=your_cloudflare_account_id
CF_API_TOKEN=your_cloudflare_api_token
CF_ZONE_ID=your_cloudflare_zone_id

# Cuentas administrativas (coma separadas)
ADMIN_EMAILS=admin@purezanaturalis.local

# Logging / Monitoring
LOG_LEVEL=info
LOG_SAMPLING_RATE=1.0
LOG_FILE_ENABLED=true
LOG_ROTATION_DAYS=30
SENTRY_DSN=

# Security headers
APP_DOMAIN=localhost
CDN_URL=https://cdn.purezanaturalis.com
API_BASE_URL=https://api.purezanaturalis.com
CSP_REPORT_URI=
CSP_REPORT_ONLY=false

# Backups
BACKUP_DIR=./backups
BACKUP_ENCRYPTION_KEY=REEMPLAZAR_CON_CLAVE_SEGURA
BACKUP_DAILY_RETENTION=30
BACKUP_MONTHLY_RETENTION=12
BACKUP_COMPRESS=true
BACKUP_SCHEDULE=0 2 * * *

# Seguridad avanzada
SECURITY_ALLOWED_ORIGINS=http://localhost:5173
SECURITY_RATE_LIMIT=true
SECURITY_CSRF=true
SECURITY_REQUEST_SIGNING=false
SECURITY_ENCRYPTION=true
SECURITY_VALIDATION=true
SECURITY_SANITIZATION=true
SECURITY_AUTH=true
SECURITY_AUDIT_LOG=true

# SSL opcional (solo si se usa HTTPS directo)
SSL_CERT_PATH=
SSL_KEY_PATH=
SSL_CA_BUNDLE_PATH=

# API externa / clientes
API_URL=https://api.pureza.local
API_CLIENT_TIMEOUT=5000
API_CLIENT_RETRY_ATTEMPTS=3
API_VERSION_DEFAULT=v1
API_V1_SUNSET_DATE=2026-06-01
BCRYPT_ROUNDS=12

# Analitica opcional (frontend legacy)
REACT_APP_GA_ID=
REACT_APP_FB_PIXEL_ID=

# Flags
STAGING=false

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=15000
